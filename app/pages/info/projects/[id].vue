<!--
================================================================================
[pages/info/projects/[id].vue] Ï†ïÎ≥¥ÌôîÏÇ¨ÏóÖ ÏÉÅÏÑ∏ ÌéòÏù¥ÏßÄ
================================================================================
URL ÌååÎùºÎØ∏ÌÑ∞(id = prjMngNo)Î°ú ÌäπÏ†ï Ï†ïÎ≥¥ÌôîÏÇ¨ÏóÖÏùò ÏÉÅÏÑ∏ Ï†ïÎ≥¥Î•º ÌëúÏãúÌï©ÎãàÎã§.
ÏàòÏ†ï, ÏÇ≠Ï†ú Í∏∞Îä•ÏùÑ Ï†úÍ≥µÌïòÎ©∞, Í≤∞Ïû¨ Ï§ë/ÏôÑÎ£å Í±¥ÏùÄ ÏÇ≠Ï†ú Î≤ÑÌäºÏù¥ Ïà®Í≤®ÏßëÎãàÎã§.

[ÎùºÏö∞ÌåÖ]
  - Ï†ëÍ∑º: /info/projects/:id
  - Î™©Î°ù Ïù¥Îèô: /info/projects
  - ÏàòÏ†ï Ïù¥Îèô: /info/projects/form?id=:id

[UI Íµ¨ÏÑ± (Ï¥ù 9Í∞ú ÏÑπÏÖò)]
  1. ÏÇ¨ÏóÖ ÏßÑÌñâ ÌòÑÌô©: 11Îã®Í≥Ñ ÌÉÄÏûÑÎùºÏù∏ (ÏòàÏÇ∞Ïã†Ï≤≠ ~ ÏôÑÎ£å), ÌòÑÏû¨ Îã®Í≥Ñ Í∞ïÏ°∞
  2. ÏÇ¨ÏóÖ Í∞úÏöî: RichText ÏÑ§Î™Ö + ÌòÑÌô©/ÌïÑÏöîÏÑ±/Í∏∞ÎåÄÌö®Í≥º/ÎØ∏Ï∂îÏßÑÏãúÎ¨∏Ï†úÏ†ê 4Í∞ú Î∞ïÏä§
  3. ÏÇ¨ÏóÖ Î≤îÏúÑ: RichText Ï†ÑÏÇ∞ ÏöîÍµ¨ÏÇ¨Ìï≠
  4. ÏßÑÌñâ ÏÉÅÌô©: Ï∂îÏßÑ Í≤ΩÍ≥º + Ìñ•ÌõÑ Í≥ÑÌöç (2Ïó¥)
  5. ÏÇ¨ÏóÖ Íµ¨Î∂Ñ: ÏóÖÎ¨¥Íµ¨Î∂Ñ/ÏÇ¨ÏóÖÏú†Ìòï/Í∏∞Ïà†Ïú†Ìòï/Ï£ºÏöîÏÇ¨Ïö©Ïûê
  6. Ìé∏ÏÑ± Í∏∞Ï§Ä: Ï§ëÎ≥µÏó¨Î∂Ä/Î≤ïÍ∑úÏÉÅÏôÑÎ£åÏãúÍ∏∞
  7. Îã¥Îãπ Ï°∞ÏßÅ: Ï£ºÍ¥ÄÎ∂ÄÏÑú(Business Owner) + ITÎ∂ÄÏÑú(IT Partner) Ïπ¥Îìú
  8. ÏòàÏÇ∞ Î∞è ÏùºÏ†ï: Ï¥ùÏòàÏÇ∞/Ï†ÑÍ≤∞Í∂å/Î≥¥Í≥†ÏÉÅÌÉú + ÏãúÏûëÏùº/Ï¢ÖÎ£åÏùº/Ï∂îÏßÑÍ∞ÄÎä•ÏÑ±
  9. ÏÜåÏöîÏûêÏõê ÏÉÅÏÑ∏: DataTable (Íµ¨Î∂Ñ/ÌíàÎ™©Î™Ö/ÏàòÎüâ/Îã®Í∞Ä/ÌÜµÌôî/ÏÜåÍ≥Ñ/ÏÇ∞Ï†ïÍ∑ºÍ±∞/ÏùºÏ†ïÏ£ºÍ∏∞) + Ìï©Í≥Ñ Footer

[Î≥¥Ïïà]
  - prjDes, prjRng (Rich Text HTML): DOMPurify(isomorphic-dompurify)Î°ú XSS Î∞©Ïñ¥

[ÏÇ≠Ï†ú Ï°∞Í±¥]
  - apfStsÍ∞Ä 'Í≤∞Ïû¨Ï§ë', 'Í≤∞Ïû¨ÏôÑÎ£å', 'ÏäπÏù∏'Ïù¥Î©¥ ÏÇ≠Ï†ú Î≤ÑÌäº Ïà®ÍπÄ
  - Í∑∏ Ïô∏ ÏÉÅÌÉúÏóêÏÑúÎßå ÏÇ≠Ï†ú ÌôïÏù∏ Îã§Ïù¥ÏñºÎ°úÍ∑∏ ÌëúÏãú

[ÌÉÄÏûÑÎùºÏù∏ Îã®Í≥Ñ]
  ÏòàÏÇ∞ Ïã†Ï≤≠ ‚Üí ÏÇ¨Ï†Ñ ÌòëÏùò ‚Üí Ï†ïÏã§Ìòë ‚Üí ÏöîÍ±¥ ÏÉÅÏÑ∏Ìôî ‚Üí ÏÜåÏöîÏòàÏÇ∞ ÏÇ∞Ï†ï
  ‚Üí Í≥ºÏã¨ÏúÑ ‚Üí ÏûÖÏ∞∞/Í≥ÑÏïΩ ‚Üí ÏÇ¨ÏóÖ Ï∂îÏßÑ ‚Üí ÎåÄÍ∏àÏßÄÍ∏â ‚Üí ÏÑ±Í≥ºÌèâÍ∞Ä ‚Üí ÏôÑÎ£å
================================================================================
-->
<script setup lang="ts">
import 'quill/dist/quill.core.css';
import DOMPurify from 'isomorphic-dompurify';

const route = useRoute();
const router = useRouter();
/** URL ÌååÎùºÎØ∏ÌÑ∞ÏóêÏÑú ÏÇ¨ÏóÖ Í¥ÄÎ¶¨Î≤àÌò∏ Ï∂îÏ∂ú */
const prjMngNo = route.params.id;

const { fetchProject, deleteProject } = useProjects();
const { data: project, error } = await fetchProject(prjMngNo as string);
const confirm = useConfirm();

definePageMeta({
    title: 'ÏÇ¨ÏóÖ ÏÉÅÏÑ∏ Ï†ïÎ≥¥'
});

/**
 * ÏÇ≠Ï†ú ÌôïÏù∏ Îã§Ïù¥ÏñºÎ°úÍ∑∏ ÌëúÏãú Î∞è Ï≤òÎ¶¨
 * ÏÇ¨Ïö©Ïûê ÌôïÏù∏ ÌõÑ deleteProject APIÎ•º Ìò∏Ï∂úÌïòÍ≥† Î™©Î°ùÏúºÎ°ú Ïù¥ÎèôÌï©ÎãàÎã§.
 */
const handleDelete = () => {
    confirm.require({
        message: 'Ï†ïÎßêÎ°ú ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå? ÏÇ≠Ï†úÎêú Îç∞Ïù¥ÌÑ∞Îäî Î≥µÍµ¨Ìï† Ïàò ÏóÜÏäµÎãàÎã§.',
        header: 'ÏÇ≠Ï†ú ÌôïÏù∏',
        icon: 'pi pi-exclamation-triangle',
        acceptClass: 'p-button-danger',
        acceptLabel: 'ÏÇ≠Ï†ú',
        rejectLabel: 'Ï∑®ÏÜå',
        accept: async () => {
            try {
                await deleteProject(prjMngNo as string);
                router.push('/info/projects'); // Î™©Î°ù ÌôîÎ©¥ÏúºÎ°ú Ïù¥Îèô
            } catch (err) {
                console.error('Failed to delete project:', err);
                // ÏóêÎü¨ Ï≤òÎ¶¨ ÌïÑÏöî Ïãú Ï∂îÍ∞Ä (Ïòà: Toast Î©îÏãúÏßÄ)
            }
        }
    });
};

/**
 * Í∏àÏï°ÏùÑ ÌïúÍµ≠ ÏõêÌôî ÌòïÏãùÏúºÎ°ú Ìè¨Îß∑ÌåÖ
 *
 * @param value - Ìè¨Îß∑ÌåÖÌï† Ïà´Ïûê
 * @returns '‚Ç©1,234,567' ÌòïÏãùÏùò Î¨∏ÏûêÏó¥
 */
const formatCurrency = (value: number) => {
    return new Intl.NumberFormat('ko-KR', { style: 'currency', currency: 'KRW' }).format(value);
};

/**
 * ÌîÑÎ°úÏ†ùÌä∏ ÏßÑÌñâ ÏÉÅÌÉúÏóê Îî∞Î•∏ CSS ÏÉâÏÉÅ ÌÅ¥ÎûòÏä§ Î∞òÌôò
 * 11Í∞ú Îã®Í≥ÑÎ≥ÑÎ°ú Í∞ÅÍ∞Å Í≥†Ïú†Ìïú ÏÉâÏÉÅÏùÑ Ï†ÅÏö©Ìï©ÎãàÎã§.
 *
 * @param status - ÌîÑÎ°úÏ†ùÌä∏ ÏÉÅÌÉú Î¨∏ÏûêÏó¥
 * @returns Tailwind CSS ÌÅ¥ÎûòÏä§ Î¨∏ÏûêÏó¥
 */
const getStatusClass = (status: string) => {
    switch (status) {
        case 'ÏòàÏÇ∞ Ïã†Ï≤≠': return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300';
        case 'ÏÇ¨Ï†Ñ ÌòëÏùò': return 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300';
        case 'Ï†ïÏã§Ìòë': return 'bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300';
        case 'ÏöîÍ±¥ ÏÉÅÏÑ∏Ìôî': return 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300';
        case 'ÏÜåÏöîÏòàÏÇ∞ ÏÇ∞Ï†ï': return 'bg-pink-100 text-pink-800 dark:bg-pink-900/30 dark:text-pink-300';
        case 'Í≥ºÏã¨ÏúÑ': return 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300';
        case 'ÏûÖÏ∞∞/Í≥ÑÏïΩ': return 'bg-cyan-100 text-cyan-800 dark:bg-cyan-900/30 dark:text-cyan-300';
        case 'ÏÇ¨ÏóÖ Ï∂îÏßÑ': return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300';
        case 'ÎåÄÍ∏àÏßÄÍ∏â': return 'bg-teal-100 text-teal-800 dark:bg-teal-900/30 dark:text-teal-300';
        case 'ÏÑ±Í≥ºÌèâÍ∞Ä': return 'bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-300';
        default: return 'bg-zinc-100 text-zinc-800 dark:bg-zinc-800 dark:text-zinc-300';
    }
};

/**
 * ÏÇ¨ÏóÖ ÏßÑÌñâ 11Îã®Í≥Ñ ÏàúÏÑú Ï†ïÏùò
 * ÌÉÄÏûÑÎùºÏù∏ Î†åÎçîÎßÅ Î∞è ÌòÑÏû¨ Îã®Í≥Ñ Ïù∏Îç±Ïä§ Í≥ÑÏÇ∞Ïóê ÏÇ¨Ïö©Îê©ÎãàÎã§.
 */
const projectStages = [
    'ÏòàÏÇ∞ Ïã†Ï≤≠', 'ÏÇ¨Ï†Ñ ÌòëÏùò', 'Ï†ïÏã§Ìòë', 'ÏöîÍ±¥ ÏÉÅÏÑ∏Ìôî', 'ÏÜåÏöîÏòàÏÇ∞ ÏÇ∞Ï†ï',
    'Í≥ºÏã¨ÏúÑ', 'ÏûÖÏ∞∞/Í≥ÑÏïΩ', 'ÏÇ¨ÏóÖ Ï∂îÏßÑ', 'ÎåÄÍ∏àÏßÄÍ∏â', 'ÏÑ±Í≥ºÌèâÍ∞Ä', 'ÏôÑÎ£å'
];

/**
 * ÌòÑÏû¨ ÌîÑÎ°úÏ†ùÌä∏ ÏÉÅÌÉúÏùò Îã®Í≥Ñ Ïù∏Îç±Ïä§ Î∞òÌôò
 * ÌÉÄÏûÑÎùºÏù∏ÏóêÏÑú ÏôÑÎ£å/ÌòÑÏû¨/ÏòàÏ†ï ÌëúÏãúÎ•º Í≤∞Ï†ïÌïòÎäî Îç∞ ÏÇ¨Ïö©Ìï©ÎãàÎã§.
 *
 * @param status - ÌòÑÏû¨ ÌîÑÎ°úÏ†ùÌä∏ ÏÉÅÌÉú Î¨∏ÏûêÏó¥
 * @returns Îã®Í≥Ñ Ïù∏Îç±Ïä§ (0-based), ÏóÜÏúºÎ©¥ -1
 */
const getCurrentStageIndex = (status?: string) => {
    if (!status) return -1;
    return projectStages.indexOf(status);
};

/**
 * ÏÜåÏöîÏûêÏõê Ìï≠Î™©Îì§Ïùò ÏÜåÍ≥Ñ(gclAmt) Ìï©ÏÇ∞
 * ÏÜåÏöîÏûêÏõê DataTable ÌïòÎã® FooterÏóê ÌëúÏãúÎê©ÎãàÎã§.
 */
const totalItemsAmount = computed(() => {
    if (!project.value?.items) return 0;
    return project.value.items.reduce((sum: number, item: any) => sum + (item.gclAmt || 0), 0);
});

/**
 * ÏÜåÏöîÏûêÏõê Íµ¨Î∂ÑÎ≥Ñ PrimeVue Tag severity Îß§Ìïë
 * DataTableÏùò Íµ¨Î∂Ñ Ïª¨ÎüºÏóê ÏÉâÏÉÅ BadgeÎ•º ÌëúÏãúÌïòÎäî Îç∞ ÏÇ¨Ïö©Ìï©ÎãàÎã§.
 *
 * @param category - ÏûêÏõê Íµ¨Î∂ÑÎ™Ö ('Í∞úÎ∞úÎπÑ' | 'Í∏∞Í≥ÑÏû•Ïπò' | 'Í∏∞ÌÉÄÎ¨¥ÌòïÏûêÏÇ∞' | 'Ï†ÑÏÇ∞ÏûÑÏ∞®Î£å' | 'Ï†ÑÏÇ∞Ï†úÎπÑ')
 * @returns PrimeVue Tag severity Í∞í
 */
const getCategorySeverity = (category: string) => {
    switch (category) {
        case 'Í∞úÎ∞úÎπÑ': return 'info';
        case 'Í∏∞Í≥ÑÏû•Ïπò': return 'warning';
        case 'Í∏∞ÌÉÄÎ¨¥ÌòïÏûêÏÇ∞': return 'success';
        case 'Ï†ÑÏÇ∞ÏûÑÏ∞®Î£å': return 'danger';
        case 'Ï†ÑÏÇ∞Ï†úÎπÑ': return 'secondary';
        default: return 'secondary';
    }
};

/**
 * HTML ÏÉàÎãàÌÉÄÏù¥Ïßï (XSS Î∞©ÏßÄ)
 * DOMPurifyÎ•º ÏÇ¨Ïö©ÌïòÏó¨ Rich Text ÌïÑÎìúÏùò ÏïÖÏÑ± Ïä§ÌÅ¨Î¶ΩÌä∏Î•º Ï†úÍ±∞Ìï©ÎãàÎã§.
 *
 * @param html - ÏÉàÎãàÌÉÄÏù¥ÏßïÌï† HTML Î¨∏ÏûêÏó¥
 * @returns ÏïàÏ†ÑÌïú HTML Î¨∏ÏûêÏó¥
 */
const sanitizeHtml = (html: string) => DOMPurify.sanitize(html);

/**
 * ÎÇ†Ïßú Î¨∏ÏûêÏó¥ÏùÑ YYYY-MM ÌòïÏãùÏúºÎ°ú Î≥ÄÌôò
 * YYYYMMDD(8ÏûêÎ¶¨) ÎòêÎäî YYYY-MM-DD ÌòïÏãùÏùÑ Î™®Îëê Ï≤òÎ¶¨Ìï©ÎãàÎã§.
 *
 * @param dateStr - Î≥ÄÌôòÌï† ÎÇ†Ïßú Î¨∏ÏûêÏó¥
 * @returns 'YYYY-MM' ÌòïÏãù Î¨∏ÏûêÏó¥ ÎòêÎäî '-'
 */
const formatDateToYearMonth = (dateStr?: string) => {
    if (!dateStr) return '-';
    /* YYYYMMDD ÌòïÏãùÏù∏ Í≤ΩÏö∞ */
    if (dateStr.length === 8 && /^\d{8}$/.test(dateStr)) {
        return `${dateStr.substring(0, 4)}-${dateStr.substring(4, 6)}`;
    }
    /* YYYY-MM-DD ÌòïÏãùÏù∏ Í≤ΩÏö∞ */
    if (dateStr.includes('-')) {
        const parts = dateStr.split('-');
        return parts.length >= 2 ? `${parts[0]}-${parts[1]}` : dateStr;
    }
    return dateStr;
};
</script>

<template>
    <!-- ÌîÑÎ°úÏ†ùÌä∏ Îç∞Ïù¥ÌÑ∞ Ï°¥Ïû¨ Ïãú ÏÉÅÏÑ∏ ÌôîÎ©¥ -->
    <div v-if="project" class="space-y-8 max-w-7xl mx-auto pb-20">

        <!-- ÏÉÅÎã® Ìó§Îçî: ÏÇ¨ÏóÖÎ™Ö + ÏÉÅÌÉú ÌÉúÍ∑∏ + Ïï°ÏÖò Î≤ÑÌäº -->
        <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
            <div class="flex items-start gap-4">
                <!-- Îí§Î°ú Í∞ÄÍ∏∞ Î≤ÑÌäº -->
                <Button icon="pi pi-arrow-left" text rounded aria-label="Back" @click="router.back()"
                    class="mt-1 w-10 h-10 bg-white/50 dark:bg-zinc-800/50 hover:bg-white dark:hover:bg-zinc-800 transition-colors" />
                <div class="space-y-2">
                    <!-- ÏÇ¨ÏóÖ Ïú†Ìòï ÌÉúÍ∑∏ + Í¥ÄÎ¶¨Î≤àÌò∏ + Í∏∞Í∞Ñ -->
                    <div class="flex flex-wrap items-center gap-2 text-sm text-zinc-500">
                        <Tag :value="project.prjTp"
                            class="bg-indigo-50 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400 border-0 px-2.5 py-0.5 font-medium"
                            rounded />
                        <span class="font-mono text-zinc-400">#{{ project.prjMngNo }}</span>
                        <span class="text-zinc-300 dark:text-zinc-700">|</span>
                        <div
                            class="flex items-center gap-1.5 px-2 py-0.5 bg-zinc-100 dark:bg-zinc-800 rounded-full text-xs font-medium">
                            <i class="pi pi-calendar text-zinc-400"></i>
                            <span>{{ project.sttDt }} ~ {{ project.endDt }}</span>
                        </div>
                    </div>
                    <!-- ÏÇ¨ÏóÖÎ™Ö + ÏßÑÌñâ ÏÉÅÌÉú ÌÉúÍ∑∏ -->
                    <div class="flex flex-wrap items-center gap-3">
                        <h1 class="text-3xl font-extrabold text-zinc-900 dark:text-zinc-50 tracking-tight">{{
                            project.prjNm }}</h1>
                        <Tag :value="project.prjSts" :class="getStatusClass(project.prjSts || '')"
                            class="text-sm px-3 py-1 font-bold shadow-sm" rounded />
                    </div>
                </div>
            </div>

            <!-- Ïï°ÏÖò Î≤ÑÌäº: Î™©Î°ù / ÏÇ≠Ï†ú(Ï°∞Í±¥Î∂Ä) / ÏàòÏ†ï -->
            <div class="flex gap-2 self-end md:self-center">
                <Button label="Î™©Î°ù" icon="pi pi-list" severity="secondary" outlined class="bg-white dark:bg-zinc-900"
                    @click="navigateTo('/info/projects')" />
                <!-- Í≤∞Ïû¨ Ï§ëÏù¥Í±∞ÎÇò ÏôÑÎ£åÎêú Í≤ΩÏö∞ ÏÇ≠Ï†ú Î≤ÑÌäº Ïà®ÍπÄ -->
                <Button v-if="!['Í≤∞Ïû¨Ï§ë', 'Í≤∞Ïû¨ÏôÑÎ£å', 'ÏäπÏù∏'].includes(project.apfSts)" label="ÏÇ≠Ï†ú" icon="pi pi-trash"
                    severity="danger" outlined class="bg-white dark:bg-zinc-900" @click="handleDelete" />
                <Button label="ÏàòÏ†ï" icon="pi pi-pencil" class="shadow-lg shadow-indigo-500/20"
                    @click="navigateTo(`/info/projects/form?id=${project.prjMngNo}`)" />
            </div>
        </div>

        <!-- ÏÑπÏÖò 1: ÏÇ¨ÏóÖ ÏßÑÌñâ ÌòÑÌô© ÌÉÄÏûÑÎùºÏù∏ -->
        <section
            class="bg-white dark:bg-zinc-900 p-8 rounded-2xl border border-zinc-100 dark:border-zinc-800 shadow-md overflow-visible">
            <div class="flex items-center justify-between mb-8">
                <h3 class="font-bold text-xl text-zinc-900 dark:text-zinc-100 flex items-center gap-2">
                    <i class="pi pi-step-forward-alt text-indigo-500"></i>
                    ÏÇ¨ÏóÖ ÏßÑÌñâ ÌòÑÌô©
                </h3>
                <!-- ÌòÑÏû¨ Îã®Í≥Ñ Î±ÉÏßÄ -->
                <span class="text-xs font-bold px-3 py-1 rounded-full bg-indigo-50 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400 border border-indigo-100 dark:border-indigo-800">
                    {{ project.prjSts }}
                </span>
            </div>

            <!-- ÌÉÄÏûÑÎùºÏù∏ Ïª®ÌÖåÏù¥ÎÑà -->
            <div class="relative w-full px-2">
                <div class="flex items-start justify-between w-full">
                    <!-- Í∞Å Îã®Í≥Ñ Ïä§ÌÖù -->
                    <div v-for="(step, index) in projectStages" :key="index"
                         class="relative flex flex-col items-center flex-1 group">

                        <!-- Ïó∞Í≤∞ÏÑ†: Ïù¥Ï†Ñ Îã®Í≥ÑÍ∞Ä ÏôÑÎ£åÎêú Í≤ΩÏö∞ Ïù∏ÎîîÍ≥†, ÏïÑÎãàÎ©¥ ÌöåÏÉâ -->
                        <div v-if="Number(index) > 0"
                             class="absolute top-5 right-1/2 w-full h-[2px] -translate-y-1/2 -z-10 transition-colors duration-500"
                             :class="[
                                getCurrentStageIndex(project.prjSts) >= Number(index)
                                    ? 'bg-indigo-500'
                                    : 'bg-zinc-200 dark:bg-zinc-700'
                             ]">
                        </div>

                        <!-- ÏõêÌòï ÎßàÏª§: ÏôÑÎ£å(Ï≤¥ÌÅ¨)/ÌòÑÏû¨(ÏßÑÌñâ ÌÖçÏä§Ìä∏+ÎßÅ)/ÏòàÏ†ï(Ïà´Ïûê) -->
                        <div class="w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold border-2 transition-all duration-300 relative z-10 mb-3 shrink-0"
                            :class="[
                                getCurrentStageIndex(project.prjSts) > Number(index)
                                    ? 'border-indigo-200 bg-indigo-50 text-indigo-400 dark:border-indigo-800 dark:bg-indigo-900/10 dark:text-indigo-500'
                                    : getCurrentStageIndex(project.prjSts) === Number(index)
                                        ? 'border-indigo-600 bg-indigo-600 text-white shadow-lg shadow-indigo-200 dark:shadow-indigo-900/50 scale-110 ring-4 ring-indigo-50 dark:ring-indigo-900/20'
                                        : 'border-zinc-200 text-zinc-300 dark:border-zinc-700 dark:text-zinc-600 bg-white dark:bg-zinc-900'
                            ]">

                            <!-- ÏôÑÎ£å Îã®Í≥Ñ: Ï≤¥ÌÅ¨ ÏïÑÏù¥ÏΩò -->
                            <i v-if="getCurrentStageIndex(project.prjSts) > Number(index)" class="pi pi-check text-lg font-bold"></i>
                            <!-- ÌòÑÏû¨ Îã®Í≥Ñ: 'ÏßÑÌñâ' ÌÖçÏä§Ìä∏ -->
                            <span v-else-if="getCurrentStageIndex(project.prjSts) === Number(index)" class="text-[10px] font-bold tracking-tighter">ÏßÑÌñâ</span>
                            <!-- ÏòàÏ†ï Îã®Í≥Ñ: ÏàúÎ≤à Ïà´Ïûê -->
                            <span v-else>{{ Number(index) + 1 }}</span>

                            <!-- ÌòÑÏû¨ Îã®Í≥Ñ Ìïë Ïï†ÎãàÎ©îÏù¥ÏÖò -->
                            <span v-if="getCurrentStageIndex(project.prjSts) === Number(index)"
                                  class="absolute inset-0 rounded-full animate-ping bg-indigo-500 opacity-20"></span>
                        </div>

                        <!-- Îã®Í≥Ñ ÎùºÎ≤® ÌÖçÏä§Ìä∏ -->
                        <div class="h-10 flex items-start justify-center w-full">
                            <span class="text-[10px] sm:text-xs font-medium text-center break-keep leading-tight px-0.5 transition-colors duration-300 w-full"
                                :class="[
                                    getCurrentStageIndex(project.prjSts) === Number(index)
                                        ? 'text-indigo-700 dark:text-indigo-400 font-bold'
                                        : getCurrentStageIndex(project.prjSts) > Number(index)
                                            ? 'text-zinc-500 dark:text-zinc-500'
                                            : 'text-zinc-300 dark:text-zinc-600'
                                ]">
                                {{ step }}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ÏÑπÏÖò 2: ÏÇ¨ÏóÖ Í∞úÏöî -->
        <section
            class="bg-white dark:bg-zinc-900 p-8 rounded-2xl border border-zinc-100 dark:border-zinc-800 shadow-md flex flex-col gap-6">
            <h3 class="font-bold text-xl text-zinc-900 dark:text-zinc-100 flex items-center gap-2">
                <i class="pi pi-info-circle text-blue-500"></i>
                ÏÇ¨ÏóÖ Í∞úÏöî
            </h3>

            <!-- ÏÇ¨ÏóÖ ÏÑ§Î™Ö (Rich Text - XSS Î∞©Ïñ¥ Ï†ÅÏö©) -->
            <div class="ql-editor p-6 bg-zinc-50 dark:bg-zinc-950/50 rounded-xl text-zinc-700 dark:text-zinc-300 leading-relaxed border border-zinc-100 dark:border-zinc-800"
                v-html="sanitizeHtml(project.prjDes || '<span class=\'text-zinc-400 italic\'>ÎÇ¥Ïö© ÏóÜÏùå</span>')"></div>

            <!-- ÌòÑÌô© / ÌïÑÏöîÏÑ± / Í∏∞ÎåÄÌö®Í≥º / ÎØ∏Ï∂îÏßÑ Ïãú Î¨∏Ï†úÏ†ê (2Ïó¥ Í∑∏Î¶¨Îìú) -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-2">
                <!-- ÌòÑÌô© -->
                <div class="group">
                    <label class="font-bold text-zinc-500 text-xs mb-2 block uppercase tracking-wider pl-1">ÌòÑÌô©</label>
                    <div
                        class="p-5 bg-zinc-50 dark:bg-zinc-950/30 rounded-xl border border-zinc-100 dark:border-zinc-800 h-[120px] overflow-y-auto text-sm text-zinc-600 dark:text-zinc-400 group-hover:border-zinc-200 dark:group-hover:border-zinc-700 transition-colors shadow-sm">
                        {{ project.saf || '-' }}
                    </div>
                </div>
                <!-- ÌïÑÏöîÏÑ± -->
                <div class="group">
                    <label class="font-bold text-zinc-500 text-xs mb-2 block uppercase tracking-wider pl-1">ÌïÑÏöîÏÑ±</label>
                    <div
                        class="p-5 bg-zinc-50 dark:bg-zinc-950/30 rounded-xl border border-zinc-100 dark:border-zinc-800 h-[120px] overflow-y-auto text-sm text-zinc-600 dark:text-zinc-400 group-hover:border-zinc-200 dark:group-hover:border-zinc-700 transition-colors shadow-sm">
                        {{ project.ncs || '-' }}
                    </div>
                </div>
                <!-- Í∏∞ÎåÄÌö®Í≥º (ÌååÎûÄÏÉâ Í∞ïÏ°∞) -->
                <div class="group">
                    <label
                        class="font-bold text-zinc-500 text-xs mb-2 block uppercase tracking-wider pl-1 text-blue-500">Í∏∞ÎåÄÌö®Í≥º</label>
                    <div
                        class="p-5 bg-blue-50/50 dark:bg-blue-900/10 rounded-xl border border-blue-100 dark:border-blue-900/30 h-[120px] overflow-y-auto text-sm text-zinc-700 dark:text-zinc-300 group-hover:border-blue-200 transition-colors shadow-sm">
                        {{ project.xptEff || '-' }}
                    </div>
                </div>
                <!-- ÎØ∏Ï∂îÏßÑ Ïãú Î¨∏Ï†úÏ†ê (Îπ®Í∞ÑÏÉâ Í∞ïÏ°∞) -->
                <div class="group">
                    <label
                        class="font-bold text-zinc-500 text-xs mb-2 block uppercase tracking-wider pl-1 text-red-500">ÎØ∏Ï∂îÏßÑ
                        Ïãú Î¨∏Ï†úÏ†ê</label>
                    <div
                        class="p-5 bg-red-50/50 dark:bg-red-900/10 rounded-xl border border-red-100 dark:border-red-900/30 h-[120px] overflow-y-auto text-sm text-zinc-700 dark:text-zinc-300 group-hover:border-red-200 transition-colors shadow-sm">
                        {{ project.plm || '-' }}
                    </div>
                </div>
            </div>
        </section>

        <!-- ÏÑπÏÖò 3: ÏÇ¨ÏóÖ Î≤îÏúÑ -->
        <section
            class="bg-white dark:bg-zinc-900 p-8 rounded-2xl border border-zinc-100 dark:border-zinc-800 shadow-md">
            <h3 class="font-bold text-xl text-zinc-900 dark:text-zinc-100 flex items-center gap-2 mb-6">
                <i class="pi pi-map text-green-500"></i>
                ÏÇ¨ÏóÖ Î≤îÏúÑ
            </h3>
            <!-- ÏÇ¨ÏóÖ Î≤îÏúÑ (Rich Text - XSS Î∞©Ïñ¥ Ï†ÅÏö©) -->
            <div class="ql-editor p-6 bg-zinc-50 dark:bg-zinc-950/50 rounded-xl text-zinc-700 dark:text-zinc-300 leading-relaxed border border-zinc-100 dark:border-zinc-800"
                v-html="sanitizeHtml(project.prjRng || '<span class=\'text-zinc-400 italic\'>ÎÇ¥Ïö© ÏóÜÏùå</span>')"></div>
        </section>

        <!-- ÏÑπÏÖò 4: ÏßÑÌñâ ÏÉÅÌô© (Ï∂îÏßÑ Í≤ΩÍ≥º + Ìñ•ÌõÑ Í≥ÑÌöç) -->
        <section
            class="bg-white dark:bg-zinc-900 p-8 rounded-2xl border border-zinc-100 dark:border-zinc-800 shadow-md">
            <h3 class="font-bold text-xl text-zinc-900 dark:text-zinc-100 flex items-center gap-2 mb-6">
                <i class="pi pi-chart-line text-orange-500"></i>
                ÏßÑÌñâ ÏÉÅÌô©
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Ï∂îÏßÑ Í≤ΩÍ≥º -->
                <div class="relative">
                    <div class="absolute left-4 top-0 bottom-0 w-0.5 bg-zinc-100 dark:bg-zinc-800"></div>
                    <div class="relative pl-10">
                        <div
                            class="absolute left-0 top-0 w-8 h-8 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500">
                            <i class="pi pi-history text-sm"></i>
                        </div>
                        <label class="font-bold text-zinc-900 dark:text-zinc-100 text-lg mb-3 block">Ï∂îÏßÑ Í≤ΩÍ≥º</label>
                        <div
                            class="p-5 bg-zinc-50 dark:bg-zinc-950/30 rounded-xl border border-zinc-100 dark:border-zinc-800 min-h-[120px] text-sm whitespace-pre-wrap text-zinc-600 dark:text-zinc-400">
                            {{ project.pulPsg || '-' }}
                        </div>
                    </div>
                </div>
                <!-- Ìñ•ÌõÑ Í≥ÑÌöç -->
                <div class="relative">
                    <div class="absolute left-4 top-0 bottom-0 w-0.5 bg-indigo-50 dark:bg-indigo-900/20"></div>
                    <div class="relative pl-10">
                        <div
                            class="absolute left-0 top-0 w-8 h-8 rounded-full bg-indigo-50 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-500">
                            <i class="pi pi-calendar-plus text-sm"></i>
                        </div>
                        <label class="font-bold text-indigo-900 dark:text-indigo-100 text-lg mb-3 block">Ìñ•ÌõÑ Í≥ÑÌöç</label>
                        <div
                            class="p-5 bg-indigo-50/30 dark:bg-indigo-900/10 rounded-xl border border-indigo-100 dark:border-indigo-900/20 min-h-[120px] text-sm whitespace-pre-wrap text-zinc-700 dark:text-zinc-300">
                            {{ project.hrfPln || '-' }}
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ÏÑπÏÖò 5 & 6: ÏÇ¨ÏóÖ Íµ¨Î∂Ñ + Ìé∏ÏÑ± Í∏∞Ï§Ä (2Ïó¥ Í∑∏Î¶¨Îìú) -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- ÏÇ¨ÏóÖ Íµ¨Î∂Ñ -->
            <section
                class="bg-white dark:bg-zinc-900 p-8 rounded-2xl border border-zinc-100 dark:border-zinc-800 shadow-md h-full">
                <h3 class="font-bold text-xl text-zinc-900 dark:text-zinc-100 flex items-center gap-2 mb-6">
                    <i class="pi pi-tags text-purple-500"></i>
                    ÏÇ¨ÏóÖ Íµ¨Î∂Ñ
                </h3>
                <div class="space-y-4">
                    <div class="flex items-center justify-between p-4 bg-zinc-50 dark:bg-zinc-950/30 rounded-xl">
                        <span class="text-zinc-500 text-sm font-medium">ÏóÖÎ¨¥ Íµ¨Î∂Ñ</span>
                        <span class="font-bold text-zinc-900 dark:text-zinc-100">{{ project.bzDtt || '-' }}</span>
                    </div>
                    <div class="flex items-center justify-between p-4 bg-zinc-50 dark:bg-zinc-950/30 rounded-xl">
                        <span class="text-zinc-500 text-sm font-medium">ÏÇ¨ÏóÖ Ïú†Ìòï</span>
                        <span class="font-bold text-zinc-900 dark:text-zinc-100">{{ project.prjTp || '-' }}</span>
                    </div>
                    <div class="flex items-center justify-between p-4 bg-zinc-50 dark:bg-zinc-950/30 rounded-xl">
                        <span class="text-zinc-500 text-sm font-medium">Í∏∞Ïà† Ïú†Ìòï</span>
                        <span class="font-bold text-zinc-900 dark:text-zinc-100">{{ project.tchnTp || '-' }}</span>
                    </div>
                    <div class="flex items-center justify-between p-4 bg-zinc-50 dark:bg-zinc-950/30 rounded-xl">
                        <span class="text-zinc-500 text-sm font-medium">Ï£ºÏöî ÏÇ¨Ïö©Ïûê</span>
                        <span class="font-bold text-zinc-900 dark:text-zinc-100">{{ project.mnUsr || '-' }}</span>
                    </div>
                </div>
            </section>

            <!-- Ìé∏ÏÑ± Í∏∞Ï§Ä -->
            <section
                class="bg-white dark:bg-zinc-900 p-8 rounded-2xl border border-zinc-100 dark:border-zinc-800 shadow-md h-full">
                <h3 class="font-bold text-xl text-zinc-900 dark:text-zinc-100 flex items-center gap-2 mb-6">
                    <i class="pi pi-check-circle text-teal-500"></i>
                    Ìé∏ÏÑ± Í∏∞Ï§Ä
                </h3>
                <div class="space-y-4">
                    <div class="flex items-center justify-between p-4 bg-zinc-50 dark:bg-zinc-950/30 rounded-xl">
                        <span class="text-zinc-500 text-sm font-medium">Ï§ëÎ≥µ Ïó¨Î∂Ä</span>
                        <!-- Ï§ëÎ≥µ Ïó¨Î∂ÄÏóê Îî∞Îùº danger/success Tag ÌëúÏãú -->
                        <Tag :severity="project.dplYn === 'Y' ? 'danger' : 'success'"
                            :value="project.dplYn === 'Y' ? 'Ï§ëÎ≥µ (Y)' : 'ÎØ∏Ï§ëÎ≥µ (N)'" rounded></Tag>
                    </div>
                    <div class="flex items-center justify-between p-4 bg-zinc-50 dark:bg-zinc-950/30 rounded-xl">
                        <span class="text-zinc-500 text-sm font-medium">Î≤ïÍ∑úÏÉÅ ÏôÑÎ£åÏãúÍ∏∞</span>
                        <span class="font-bold text-zinc-900 dark:text-zinc-100">{{ project.lblFsgTlm || '-' }}</span>
                    </div>
                </div>
            </section>
        </div>

        <!-- ÏÑπÏÖò 7: Îã¥Îãπ Ï°∞ÏßÅ -->
        <section
            class="bg-white dark:bg-zinc-900 p-8 rounded-2xl border border-zinc-100 dark:border-zinc-800 shadow-md">
            <h3 class="font-bold text-xl text-zinc-900 dark:text-zinc-100 flex items-center gap-2 mb-6">
                <i class="pi pi-users text-cyan-500"></i>
                Îã¥Îãπ Ï°∞ÏßÅ
            </h3>
            <div class="grid grid-cols-1 xl:grid-cols-2 gap-6">
                <!-- Ï£ºÍ¥ÄÎ∂ÄÏÑú Ï†ïÎ≥¥ Ïπ¥Îìú (Business Owner) -->
                <div
                    class="flex flex-col sm:flex-row sm:items-center gap-6 p-6 bg-gradient-to-br from-blue-50 to-white dark:from-zinc-800 dark:to-zinc-900 rounded-2xl border border-blue-100 dark:border-zinc-700 shadow-sm relative overflow-hidden group">
                    <div
                        class="absolute right-0 top-0 w-24 h-24 bg-blue-100 dark:bg-blue-900/20 rounded-full blur-2xl -mr-10 -mt-10 group-hover:scale-150 transition-transform duration-700">
                    </div>

                    <div class="flex items-center gap-4 w-[240px] shrink-0 z-10">
                        <div
                            class="inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-white dark:bg-zinc-800 text-blue-600 dark:text-blue-400 shadow-sm border border-blue-50 dark:border-zinc-700">
                            <i class="pi pi-briefcase text-2xl"></i>
                        </div>
                        <div>
                            <div class="text-xs font-bold text-blue-500 uppercase tracking-wider mb-1">Business Owner
                            </div>
                            <div class="font-extrabold text-xl text-zinc-900 dark:text-zinc-100 leading-none mb-1">{{
                                project.svnDpm }}</div>
                            <div class="text-xs text-zinc-500">{{ project.svnHdq }}</div>
                        </div>
                    </div>

                    <div class="hidden sm:block w-px h-12 bg-zinc-200 dark:bg-zinc-700 z-10"></div>

                    <div class="flex items-center gap-8 flex-1 z-10">
                        <div class="flex flex-col gap-1">
                            <span class="text-[10px] text-zinc-400 uppercase font-bold">Manager</span>
                            <span class="text-zinc-900 dark:text-zinc-100 font-bold text-lg">{{ project.svnDpmTlr || '-'
                                }}</span>
                            <span class="text-xs text-zinc-500">ÌåÄÏû•</span>
                        </div>
                        <div class="flex flex-col gap-1">
                            <span class="text-[10px] text-zinc-400 uppercase font-bold">Staff</span>
                            <span class="text-zinc-900 dark:text-zinc-100 font-bold text-lg">{{ project.svnDpmCgpr ||
                                '-' }}</span>
                            <span class="text-xs text-zinc-500">Îã¥Îãπ</span>
                        </div>
                    </div>
                </div>

                <!-- ITÎ∂ÄÏÑú Ï†ïÎ≥¥ Ïπ¥Îìú (IT Partner) -->
                <div
                    class="flex flex-col sm:flex-row sm:items-center gap-6 p-6 bg-gradient-to-br from-indigo-50 to-white dark:from-zinc-800 dark:to-zinc-900 rounded-2xl border border-indigo-100 dark:border-zinc-700 shadow-sm relative overflow-hidden group">
                    <div
                        class="absolute right-0 top-0 w-24 h-24 bg-indigo-100 dark:bg-indigo-900/20 rounded-full blur-2xl -mr-10 -mt-10 group-hover:scale-150 transition-transform duration-700">
                    </div>

                    <div class="flex items-center gap-4 w-[240px] shrink-0 z-10">
                        <div
                            class="inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-white dark:bg-zinc-800 text-indigo-600 dark:text-indigo-400 shadow-sm border border-indigo-50 dark:border-zinc-700">
                            <i class="pi pi-desktop text-2xl"></i>
                        </div>
                        <div>
                            <div class="text-xs font-bold text-indigo-500 uppercase tracking-wider mb-1">IT Partner
                            </div>
                            <div class="font-extrabold text-xl text-zinc-900 dark:text-zinc-100 leading-none mb-1">{{
                                project.itDpm }}</div>
                        </div>
                    </div>

                    <div class="hidden sm:block w-px h-12 bg-zinc-200 dark:bg-zinc-700 z-10"></div>

                    <div class="flex items-center gap-8 flex-1 z-10">
                        <div class="flex flex-col gap-1">
                            <span class="text-[10px] text-zinc-400 uppercase font-bold">Manager</span>
                            <span class="text-zinc-900 dark:text-zinc-100 font-bold text-lg">{{ project.itDpmTlr || '-'
                                }}</span>
                            <span class="text-xs text-zinc-500">ÌåÄÏû•</span>
                        </div>
                        <div class="flex flex-col gap-1">
                            <span class="text-[10px] text-zinc-400 uppercase font-bold">Staff</span>
                            <span class="text-zinc-900 dark:text-zinc-100 font-bold text-lg">{{ project.itDpmCgpr || '-'
                                }}</span>
                            <span class="text-xs text-zinc-500">Îã¥Îãπ</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ÏÑπÏÖò 8: Ï∂îÏßÑÏãúÍ∏∞ Î∞è ÏÜåÏöîÏòàÏÇ∞ -->
        <section
            class="bg-white dark:bg-zinc-900 p-8 rounded-2xl border border-zinc-100 dark:border-zinc-800 shadow-md">
            <h3 class="font-bold text-xl text-zinc-900 dark:text-zinc-100 flex items-center gap-2 mb-6">
                <i class="pi pi-wallet text-yellow-500"></i>
                Ï∂îÏßÑÏãúÍ∏∞ Î∞è ÏÜåÏöîÏòàÏÇ∞
            </h3>
            <!-- Ï¥ùÏòàÏÇ∞ / Ï†ÑÍ≤∞Í∂å / Î≥¥Í≥†ÏÉÅÌÉú Ïπ¥Îìú -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div
                    class="flex flex-col justify-center items-center p-6 bg-yellow-50/[0.6] dark:bg-yellow-900/10 rounded-2xl border border-yellow-100 dark:border-yellow-900/20 text-center relative overflow-hidden">
                    <div
                        class="absolute -right-4 -top-4 w-20 h-20 bg-yellow-100 dark:bg-yellow-900/30 rounded-full blur-xl">
                    </div>
                    <div
                        class="text-sm font-bold text-yellow-600 dark:text-yellow-500 uppercase tracking-wide mb-2 z-10">
                        Ï¥ù ÏòàÏÇ∞</div>
                    <div class="text-4xl font-extrabold text-zinc-900 dark:text-zinc-50 z-10 tracking-tight">{{
                        formatCurrency(project.prjBg) }}</div>
                    <div class="text-xs text-zinc-400 mt-2 z-10">* Î∂ÄÍ∞ÄÏÑ∏ Ìè¨Ìï®</div>
                </div>

                <div
                    class="flex flex-col justify-center items-center p-6 bg-blue-50/[0.6] dark:bg-blue-900/10 rounded-2xl border border-blue-100 dark:border-blue-900/20 text-center relative overflow-hidden">
                    <div
                        class="absolute -right-4 -top-4 w-20 h-20 bg-blue-100 dark:bg-blue-900/30 rounded-full blur-xl">
                    </div>
                    <div class="text-sm font-bold text-blue-600 dark:text-blue-500 uppercase tracking-wide mb-2 z-10">
                        Ï†ÑÍ≤∞Í∂å</div>
                    <div class="text-4xl font-extrabold text-zinc-900 dark:text-zinc-50 z-10 tracking-tight">{{
                        project.edrt || '-' }}</div>
                </div>

                <div
                    class="flex flex-col justify-center items-center p-6 bg-green-50/[0.6] dark:bg-green-900/10 rounded-2xl border border-green-100 dark:border-green-900/20 text-center relative overflow-hidden">
                    <div
                        class="absolute -right-4 -top-4 w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full blur-xl">
                    </div>
                    <div class="text-sm font-bold text-green-600 dark:text-green-500 uppercase tracking-wide mb-2 z-10">
                        Î≥¥Í≥†ÏÉÅÌÉú</div>
                    <div class="text-4xl font-extrabold text-zinc-900 dark:text-zinc-50 z-10 tracking-tight">{{
                        project.rprSts || '-' }}</div>
                </div>
            </div>

            <!-- ÏãúÏûëÏùº / Ï¢ÖÎ£åÏùº / Ï∂îÏßÑÍ∞ÄÎä•ÏÑ± -->
            <div class="mt-6 pt-6 border-t border-zinc-100 dark:border-zinc-800">
                <div class="flex flex-col md:flex-row md:items-center gap-8 justify-around">
                    <div class="flex flex-col items-center gap-2">
                        <span class="text-xs font-bold text-zinc-400 uppercase tracking-widest">Start Date</span>
                        <div class="text-xl font-bold text-zinc-900 dark:text-zinc-100 font-mono">{{ project.sttDt ||
                            '-' }}</div>
                    </div>

                    <div class="hidden md:block w-32 h-1 bg-zinc-100 dark:bg-zinc-800 rounded-full relative">
                        <div class="absolute top-0 left-0 w-1/3 h-full bg-indigo-500 rounded-full"></div>
                    </div>

                    <div class="flex flex-col items-center gap-2">
                        <span class="text-xs font-bold text-zinc-400 uppercase tracking-widest">End Date</span>
                        <div class="text-xl font-bold text-zinc-900 dark:text-zinc-100 font-mono">{{ project.endDt ||
                            '-' }}</div>
                    </div>

                    <div
                        class="flex flex-col items-center gap-2 md:border-l md:border-zinc-100 dark:md:border-zinc-800 md:pl-8">
                        <span class="text-xs font-bold text-zinc-400 uppercase tracking-widest">Ï∂îÏßÑÍ∞ÄÎä•ÏÑ±</span>
                        <div
                            class="px-4 py-1.5 bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 rounded-full font-bold text-sm">
                            {{ project.prjPulPtt || '-' }}
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ÏÑπÏÖò 9: ÏÜåÏöîÏûêÏõê ÏÉÅÏÑ∏ÎÇ¥Ïö© DataTable -->
        <section
            class="bg-white dark:bg-zinc-900 p-8 rounded-2xl border border-zinc-100 dark:border-zinc-800 shadow-md">
            <h3 class="font-bold text-xl text-zinc-900 dark:text-zinc-100 flex items-center gap-2 mb-6">
                <i class="pi pi-box text-pink-500"></i>
                ÏÜåÏöîÏûêÏõê ÏÉÅÏÑ∏ÎÇ¥Ïö©
            </h3>

            <div class="rounded-xl border border-zinc-200 dark:border-zinc-700 overflow-hidden shadow-sm">
                <DataTable :value="project.items || []" stripedRows class="resource-table-modern">
                    <template #empty>
                        <div class="text-center text-zinc-500 py-12 flex flex-col items-center gap-3">
                            <i class="pi pi-inbox text-4xl text-zinc-300"></i>
                            <p>Îì±Î°ùÎêú ÏÜåÏöîÏûêÏõêÏù¥ ÏóÜÏäµÎãàÎã§.</p>
                        </div>
                    </template>

                    <!-- Íµ¨Î∂Ñ: Ïπ¥ÌÖåÍ≥†Î¶¨Î≥Ñ ÏÉâÏÉÅ Badge -->
                    <Column field="gclDtt" header="Íµ¨Î∂Ñ" headerClass="bg-zinc-50/80 dark:bg-zinc-800"
                        style="min-width: 100px">
                        <template #body="{ data }">
                            <Tag :value="data.gclDtt" :severity="getCategorySeverity(data.gclDtt)" rounded
                                class="text-xs"></Tag>
                        </template>
                    </Column>
                    <Column field="gclNm" header="ÌíàÎ™©Î™Ö" headerClass="bg-zinc-50/80 dark:bg-zinc-800"
                        style="min-width: 200px">
                        <template #body="{ data }">
                            <span class="text-zinc-700 dark:text-zinc-200 font-medium">{{ data.gclNm }}</span>
                        </template>
                    </Column>
                    <Column field="gclQtt" header="ÏàòÎüâ" headerClass="bg-zinc-50/80 dark:bg-zinc-800 text-right"
                        class="text-right" style="width: 80px" />
                    <!-- Îã®Í∞Ä: ÏÜåÍ≥Ñ √∑ ÏàòÎüâÏúºÎ°ú Í≥ÑÏÇ∞ -->
                    <Column field="upr" header="Îã®Í∞Ä" headerClass="bg-zinc-50/80 dark:bg-zinc-800 text-right"
                        class="text-right" style="min-width: 120px">
                        <template #body="{ data }">
                            <span class="text-zinc-600 dark:text-zinc-400">{{ formatCurrency(data.gclAmt / data.gclQtt ||
                                0).replace('‚Ç©',
                                '') }}</span>
                        </template>
                    </Column>
                    <Column field="cur" header="ÌÜµÌôî" headerClass="bg-zinc-50/80 dark:bg-zinc-800 text-center"
                        class="text-right bg-zinc-50/50 dark:bg-zinc-900" style="width: 60px" />
                    <!-- ÏÜåÍ≥Ñ -->
                    <Column field="amt" header="ÏÜåÍ≥Ñ" headerClass="bg-zinc-50/80 dark:bg-zinc-800 text-right"
                        class="text-right bg-zinc-50/50 dark:bg-zinc-900" style="min-width: 140px">
                        <template #body="{ data }">
                            <span class="font-bold text-zinc-900 dark:text-zinc-100">{{ formatCurrency(data.gclAmt || 0)
                            }}</span>
                        </template>
                    </Column>
                    <Column field="bgFdtn" header="ÏÇ∞Ï†ïÍ∑ºÍ±∞" headerClass="bg-zinc-50/80 dark:bg-zinc-800"
                        style="min-width: 200px" class="text-right bg-zinc-50/50 dark:bg-zinc-900" />
                    <!-- ÏùºÏ†ï/Ï£ºÍ∏∞: Íµ¨Î∂ÑÏóê Îî∞Îùº ÎèÑÏûÖÏãúÍ∏∞(YYYY-MM) ÎòêÎäî ÏßÄÍ∏âÏ£ºÍ∏∞ ÌëúÏãú -->
                    <Column header="ÏùºÏ†ï/Ï£ºÍ∏∞" headerClass="bg-zinc-50/80 dark:bg-zinc-800 text-center"
                        class="text-right bg-zinc-50/50 dark:bg-zinc-900" style="min-width: 100px">
                        <template #body="{ data }">
                            <div class="inline-flex items-center gap-1 px-2 py-0.5 text-zinc-600 dark:text-zinc-300">
                                <!-- ÏûêÎ≥∏ÏòàÏÇ∞ Íµ¨Î∂Ñ(Í∞úÎ∞úÎπÑ/Í∏∞Í≥ÑÏû•Ïπò/Í∏∞ÌÉÄÎ¨¥ÌòïÏûêÏÇ∞)ÏùÄ ÎèÑÏûÖÏãúÍ∏∞ -->
                                <span v-if="['Í∞úÎ∞úÎπÑ', 'Í∏∞Í≥ÑÏû•Ïπò', 'Í∏∞ÌÉÄÎ¨¥ÌòïÏûêÏÇ∞'].includes(data.gclDtt)"
                                    class="text-right bg-zinc-50/50 dark:bg-zinc-900">
                                    {{ formatDateToYearMonth(data.itdDt) }}
                                </span>
                                <!-- ÏûÑÏ∞®Î£å/Ï†úÎπÑ Íµ¨Î∂ÑÏùÄ ÏßÄÍ∏âÏ£ºÍ∏∞ -->
                                <span v-else class="text-right bg-zinc-50/50 dark:bg-zinc-900">
                                    {{ data.dfrCle }}
                                </span>
                            </div>
                        </template>
                    </Column>
                    <!-- Footer: ÏÜåÏöîÏûêÏõê Ï¥ù Ìï©Í≥Ñ -->
                    <ColumnGroup type="footer">
                        <Row>
                            <Column footer="Ï¥ù Ìï©Í≥Ñ" :colspan="5"
                                footerClass="text-right font-bold text-lg bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 pr-8" />
                            <Column :footer="formatCurrency(totalItemsAmount)"
                                footerClass="text-right font-extrabold text-lg text-indigo-600 dark:text-indigo-400 bg-zinc-100 dark:bg-zinc-800" />
                            <Column :colspan="2" footerClass="bg-zinc-100 dark:bg-zinc-800" />
                        </Row>
                    </ColumnGroup>
                </DataTable>
            </div>
        </section>

    </div>

    <!-- API Ïò§Î•ò ÏÉÅÌÉú -->
    <div v-else-if="error" class="flex flex-col items-center justify-center py-20 text-red-500 animate-pulse">
        <i class="pi pi-exclamation-circle text-5xl mb-6"></i>
        <h2 class="text-2xl font-bold mb-2">Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§ÏßÄ Î™ªÌñàÏäµÎãàÎã§</h2>
        <p class="text-zinc-500 mb-6">{{ error.message }}</p>
        <Button label="Îã§Ïãú ÏãúÎèÑ" icon="pi pi-refresh" @click="router.go(0)" />
        <Button label="Î™©Î°ùÏúºÎ°ú" link @click="router.back()" class="mt-2" />
    </div>

    <!-- Îç∞Ïù¥ÌÑ∞ ÏóÜÏùå (Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî ID) -->
    <div v-else class="flex flex-col items-center justify-center py-32 text-center opacity-50">
        <div class="text-6xl mb-6 grayscale filter">üò¢</div>
        <h2 class="text-2xl font-bold text-zinc-800 dark:text-zinc-200">Ï∞æÏúºÏãúÎäî ÏÇ¨ÏóÖ Ï†ïÎ≥¥Í∞Ä ÏóÜÏäµÎãàÎã§.</h2>
        <p class="text-zinc-500 mt-2">ÏÇ≠Ï†úÎêòÏóàÍ±∞ÎÇò Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî ÌîÑÎ°úÏ†ùÌä∏ IDÏûÖÎãàÎã§.</p>
        <Button label="Î™©Î°ùÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞" outlined @click="router.back()" class="mt-8" />
    </div>
</template>
